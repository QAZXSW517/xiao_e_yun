(()=>{"use strict";const e=new class{constructor(){this.__viewer={},this.info="|主要核心|"}DOM_ready(e){document.addEventListener("DOMContentLoaded",e,{once:!0})}background(e,t){const n=this.info+"背景加載器|";console.log(n+"開始運行");const s=new Image,o=document.getElementById("preload_background"),a=document.getElementById("main_background"),c=Date.now();function i(e,t,n){s.src=t,s.addEventListener("load",(()=>{e.style.backgroundImage=`url(${t})`,n()}),{once:!0})}i(o,e,(()=>{console.log(n+"加載成功低畫質背景"),i(a,t,(()=>{const e=Date.now();console.log(n+"加載成功高畫質背景"),e-c<=50?o.style.display="none":this.fade_out(o,(()=>{}),1200)}))}))}fade_in(e,t,n=400){const s=this.info+"淡入|";console.log(s+n+"ms");const o=Number(getComputedStyle(e).opacity);"none"===e.style.display&&(e.style.display="block");const a=Math.floor(n/10);let c=a;const i=setInterval(r,10);function r(){c--;const n=(1-o)/a*(a-c)+o;e.style.opacity=n,0===c&&(clearInterval(i),t&&t())}r()}fade_out(e,t,n=400){const s=this.info+"淡出|";console.log(s+n+"ms");const o=Number(getComputedStyle(e).opacity),a=Math.floor(n/10);let c=a;const i=setInterval(r,10);function r(){c--;const n=o/a*c;e.style.opacity=n,0===c&&(clearInterval(i),e.style.display="none",t&&t())}r()}viewer(e,t,n){if(void 0===e)return this.__viewer;if(void 0===t)return this.__viewer[e];if(t!==this.__viewer[e])try{const s=this,o=document.getElementById("$"+e);function a(){o.innerHTML=t,s.fade_in(o),n&&n()}"none"===o.style.display||"0"===o.style.opacity||""===s.__viewer[e]||void 0===s.__viewer[e]?a():s.fade_out(o,a)}catch(t){const n=this.info+"viewer|";console.warn(n+"未找到id:"+e,t)}return this.__viewer[e]=t}};e.DOM_ready((()=>{const t="resources/images/background";function n(){const e=sessionStorage.getItem("your_name");return""===e?"陌生人":e||"陌生人"}e.background(`${t}_blur.webp`,`${t}.webp`),e.viewer("your_name",`歡迎回來！${n()}！`);const s=document.getElementById("hello_time");function o(){const t=n();let o="";switch((new Date).getHours()){case 23:case 0:case 1:case 2:case 3:o=`${t}還沒睡麻，${t}可不要一直熬夜喔~`;break;case 4:case 5:case 6:case 7:case 8:case 9:o=`${t}早安喵~`;break;case 10:case 11:o=`${t}午安~快要到中午惹~`;break;case 12:o=`${t}~今天的午餐真好吃呢~`;break;case 13:case 14:case 15:o=`${t}午安~想要躺在${t}的懷裡~`;case 16:case 17:case 18:case 19:case 20:o=`${t}晚上好呀~`;break;case 21:case 22:o=`${t}記得可要早點睡喔~`}e.viewer("hello_time",o,(()=>{s.classList.remove("have_input")}))}o(),setInterval(o,3e5);let a=0;function c(e,t){t&&e.length>0&&e.length<=32&&(sessionStorage.removeItem("last_search"),location.href=`https://www.google.com/search?q=${encodeURIComponent(e)}`)}document.body.addEventListener("click",(t=>{a=0;const s=n();e.viewer("your_name",`歡迎回來！${s}！`),o()}),!1),document.getElementById("title").addEventListener("click",(t=>{t.stopPropagation(),2!==a&&(a=1,e.viewer("your_name","想要怎麼叫你呢~"),e.viewer("hello_time","<input id='input_your_name'>",(()=>{document.getElementById("input_your_name").value=sessionStorage.getItem("your_name")||"",s.classList.add("have_input")})))}),!1),s.addEventListener("click",(t=>{t.stopPropagation(),1!==a&&(a=2,e.viewer("your_name",`${n()}要找什麼東西嗎~`),e.viewer("hello_time","<input id='search' class='inline' minlength='1' maxlength='32'><button id='search_btn'>尋找</button>",(()=>{document.getElementById("search").value=sessionStorage.getItem("last_search")||"",s.classList.add("have_input")})))}),!1),s.addEventListener("input",(e=>{const t=e.target,n=t.value;sessionStorage.setItem({input_your_name:"your_name",search:"last_search"}[t.id],n)}),!1),s.addEventListener("keypress",(function(e){const t=e.target;c(t.value,"Enter"===e.key&&"search"===t.id)}),!1),s.addEventListener("click",(function(e){const t="search_btn"===e.target.id;t&&c(document.getElementById("search").value,t)}),!1)}))})();
//# sourceMappingURL=main.js.map