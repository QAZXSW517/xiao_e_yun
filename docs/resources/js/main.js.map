{"version":3,"sources":["webpack://test/./ts/core/index.ts","webpack://test/./ts/main.ts"],"names":["main","__viewer","info","DOM_ready","fun","document","addEventListener","once","background","low_quality_url","high_quality_url","this","console","log","img","Image","pre_background","getElementById","main_background","start_time","Date","now","image_load","el","url","done","src","style","backgroundImage","done_time","display","fade_out","fade_in","time","opacity","Number","getComputedStyle","total_i","Math","floor","i","interval","setInterval","run","fade_opacity","clearInterval","viewer","key","val","undefined","$this","innerHTML","e","warn","image_file","your_name","name","sessionStorage","getItem","el_hello_time","hello_time","$your_name","text","getHours","classList","remove","mode","search","value","$if","length","removeItem","location","href","encodeURIComponent","body","stopPropagation","add","target","setItem","id","is_true"],"mappings":"mBAAA,MCCMA,EAAO,IDDb,MACI,cA4FQ,KAAAC,SAAW,GA8BX,KAAAC,KAAO,SAxHRC,UAAUC,GACbC,SAASC,iBAAiB,mBAAmBF,EAAI,CAACG,MAAK,IAGpDC,WAAWC,EAAwBC,GACtC,MAAMR,EAAOS,KAAKT,KAAK,SACvBU,QAAQC,IAAIX,EAAK,QACjB,MAAMY,EAAM,IAAIC,MACVC,EAAiBX,SAASY,eAAe,sBACzCC,EAAkBb,SAASY,eAAe,mBAE1CE,EAAaC,KAAKC,MAcxB,SAASC,EAAWC,EAAeC,EAAWC,GAC1CX,EAAIY,IAAMF,EACVV,EAAIR,iBAAiB,QAAQ,KACzBiB,EAAGI,MAAMC,gBAAkB,OAAOJ,KAClCC,MACF,CAAClB,MAAK,IAlBZe,EAAWN,EAAeP,GAAgB,KACtCG,QAAQC,IAAIX,EAAK,aACjBoB,EAAWJ,EAAgBR,GAAiB,KACxC,MAAMmB,EAAYT,KAAKC,MACvBT,QAAQC,IAAIX,EAAK,aACb2B,EAAYV,GAAc,GAC1BH,EAAeW,MAAMG,QAAU,OAE/BnB,KAAKoB,SAASf,GAAe,QAAO,YAc7CgB,QAAQT,EAAeE,EAAeQ,EAAY,KACrD,MAAM/B,EAAOS,KAAKT,KAAK,MACvBU,QAAQC,IAAIX,EAAK+B,EAAK,MAEtB,MAAMC,EAAUC,OAAOC,iBAAiBb,GAAIW,SAEpB,SAArBX,EAAGI,MAAMG,UACRP,EAAGI,MAAMG,QAAU,SAGvB,MACMO,EAAUC,KAAKC,MAAMN,EADV,IAEjB,IAAIO,EAAIH,EAER,MAAMI,EAAWC,YAAYC,EAJZ,IAOjB,SAASA,IACLH,IAEA,MAAMI,GAAmB,EAAIV,GAAYG,GAAWA,EAAUG,GAAMN,EACnEX,EAAGI,MAAMO,QAAgCU,EAEjC,IAANJ,IACCK,cAAcJ,GACXhB,GAAMA,KAVjBkB,IAeGZ,SAASR,EAAeE,EAAeQ,EAAY,KACtD,MAAM/B,EAAOS,KAAKT,KAAK,MACvBU,QAAQC,IAAIX,EAAK+B,EAAK,MAEtB,MAAMC,EAAUC,OAAOC,iBAAiBb,GAAIW,SAGtCG,EAAUC,KAAKC,MAAMN,EADV,IAEjB,IAAIO,EAAIH,EAER,MAAMI,EAAWC,YAAYC,EAJZ,IAOjB,SAASA,IACLH,IAEA,MAAMI,EAAeV,EAAUG,EAAUG,EACxCjB,EAAGI,MAAMO,QAAgCU,EAEjC,IAANJ,IACCK,cAAcJ,GACdlB,EAAGI,MAAMG,QAAU,OAChBL,GAAMA,KAXjBkB,IAgBGG,OAAOC,EAAYC,EAAYvB,GAClC,QAASwB,IAANF,EACC,OAAOpC,KAAKV,SACV,QAASgD,IAAND,EACL,OAAOrC,KAAKV,SAAS8C,GAErB,GAAGC,IAAQrC,KAAKV,SAAS8C,GACrB,IACI,MAAMG,EAAQvC,KACRY,EAAKlB,SAASY,eAAe,IAAI8B,GAMvC,SAASJ,IACLpB,EAAG4B,UAAYH,EACfE,EAAMlB,QAAQT,GACXE,GAAMA,IARW,SAArBF,EAAGI,MAAMG,SAAyC,MAArBP,EAAGI,MAAMO,SAAyC,KAAxBgB,EAAMjD,SAAS8C,SAAqCE,IAAxBC,EAAMjD,SAAS8C,GACjGJ,IAEAO,EAAMnB,SAASR,EAAGoB,GAOzB,MAAMS,GACH,MAAMlD,EAAOS,KAAKT,KAAK,UACvBU,QAAQyC,KAAKnD,EAAK,SAAS6C,EAAIK,GAGvC,OAAOzC,KAAKV,SAAS8C,GAAOC,ICrHxChD,EAAKG,WAAU,KACX,MAAMmD,EAAa,8BAGnB,SAASC,IACL,MAAMC,EAAOC,eAAeC,QAAQ,aACpC,MAAgB,KAATF,EAAc,MAAQA,GAAQ,MAJzCxD,EAAKQ,WAAW,GAAG8C,cAAwB,GAAGA,UAO9CtD,EAAK8C,OAAO,YAAa,QAAQS,QACjC,MAAMI,EAAgBtD,SAASY,eAAe,cAI9C,SAAS2C,IACL,MAAMC,EAAaN,IAEnB,IAAIO,EAAO,GACX,QAFW,IAAI1C,MAAO2C,YAGlB,KAAK,GACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACDD,EAAO,GAAGD,SAAkBA,aAC5B,MACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACDC,EAAO,GAAGD,QACV,MACJ,KAAK,GACL,KAAK,GACDC,EAAO,GAAGD,cACV,MACJ,KAAK,GACDC,EAAO,GAAGD,eACV,MACJ,KAAK,GACL,KAAK,GACL,KAAK,GACDC,EAAO,GAAGD,WAAoBA,QAClC,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACDC,EAAO,GAAGD,SACV,MACJ,KAAK,GACL,KAAK,GACDC,EAAO,GAAGD,aAGlB7D,EAAK8C,OAAO,aAAcgB,GAAM,KAC5BH,EAAcK,UAAUC,OAAO,iBA9CvCL,IACAlB,YAAYkB,EAAY,KAiDxB,IAAIM,EAAO,EAqDX,SAASC,EAAOC,EAAeC,GACvBA,GAAOD,EAAME,OAAS,GAAKF,EAAME,QAAU,KAC3Cb,eAAec,WAAW,eAC1BC,SAASC,KAAO,mCAAmCC,mBAAmBN,MAtD9E/D,SAASsE,KAAKrE,iBAAiB,SAAU8C,IACrCc,EAAO,EACP,MAAML,EAAaN,IACnBvD,EAAK8C,OAAO,YAAa,QAAQe,MACjCD,OACD,GACHvD,SAASY,eAAe,SAASX,iBAAiB,SAAU8C,IACxDA,EAAEwB,kBACW,IAATV,IACJA,EAAO,EACPlE,EAAK8C,OAAO,YAAa,YACzB9C,EAAK8C,OAAO,aAAc,gCAAgC,KACxCzC,SAASY,eAAe,mBAChCmD,MAAQX,eAAeC,QAAQ,cAAgB,GACrDC,EAAcK,UAAUa,IAAI,qBAEjC,GACHlB,EAAcrD,iBAAiB,SAAU8C,IACrCA,EAAEwB,kBACW,IAATV,IACJA,EAAO,EACPlE,EAAK8C,OAAO,YAAa,GAAGS,eAC5BvD,EAAK8C,OAAO,aAAc,sGAAsG,KAC9GzC,SAASY,eAAe,UAChCmD,MAAQX,eAAeC,QAAQ,gBAAkB,GACvDC,EAAcK,UAAUa,IAAI,qBAEjC,GACHlB,EAAcrD,iBAAiB,SAAU8C,IAErC,MAAM0B,EAAS1B,EAAE0B,OACXV,EAAQU,EAAOV,MAKrBX,eAAesB,QAJC,CACZ,gBAAmB,YACnB,OAAU,eAEiBD,EAAOE,IAAKZ,MAC5C,GACHT,EAAcrD,iBAAiB,YAAY,SAAU8C,GACjD,MAAM0B,EAAS1B,EAAE0B,OACjBX,EAAOW,EAAOV,MAAkB,UAAVhB,EAAEL,KAAiC,WAAd+B,EAAOE,OACnD,GACHrB,EAAcrD,iBAAiB,SAAS,SAAU8C,GAC9C,MACM6B,EAAwB,eADf7B,EAAE0B,OACME,GACnBC,GAEAd,EADe9D,SAASY,eAAe,UAA+BmD,MACxDa,MAEnB,O","file":"../resources/js/main.js","sourcesContent":["export  default class{\r\n    public constructor(){\r\n    }\r\n    public DOM_ready(fun:()=>void){\r\n        document.addEventListener('DOMContentLoaded',fun,{once:true})\r\n    }\r\n\r\n    public background(low_quality_url:string, high_quality_url:string){\r\n        const info = this.info+\"背景加載器|\"\r\n        console.log(info+\"開始運行\")\r\n        const img = new Image()\r\n        const pre_background = document.getElementById('preload_background')\r\n        const main_background = document.getElementById('main_background')\r\n\r\n        const start_time = Date.now()\r\n        image_load(pre_background,low_quality_url,()=>{\r\n            console.log(info+\"加載成功低畫質背景\")\r\n            image_load(main_background,high_quality_url,()=>{\r\n                const done_time = Date.now()\r\n                console.log(info+\"加載成功高畫質背景\")\r\n                if((done_time - start_time)<= 50){\r\n                    pre_background.style.display = \"none\"\r\n                }else{\r\n                    this.fade_out(pre_background,()=>{},1200)\r\n                }\r\n            })\r\n        })\r\n        \r\n        function image_load(el:HTMLElement,url:string,done:()=>void) {\r\n            img.src = url\r\n            img.addEventListener('load', () => {\r\n                el.style.backgroundImage = `url(${url})`\r\n                done()\r\n            },{once:true})\r\n        }\r\n    }\r\n\r\n    public fade_in(el:HTMLElement,done?:()=>void,time:number=400){\r\n        const info = this.info+\"淡入|\"\r\n        console.log(info+time+\"ms\")\r\n\r\n        const opacity = Number(getComputedStyle(el).opacity) as unknown as number\r\n\r\n        if(el.style.display === \"none\"){\r\n            el.style.display = \"block\"\r\n        }\r\n        \r\n        const run_time = 10 //間隔 10ms\r\n        const total_i = Math.floor(time / run_time) //總運行次數\r\n        let i = total_i //運行次數\r\n\r\n        const interval = setInterval(run,run_time)\r\n        run()\r\n\r\n        function run() { \r\n            i--\r\n\r\n            const fade_opacity = ( ( 1 - opacity ) / total_i * (total_i - i)) + opacity;\r\n            (el.style.opacity as unknown as number) = fade_opacity\r\n            \r\n            if(i === 0){\r\n                clearInterval(interval)\r\n                if(done){done()}\r\n            }\r\n        }\r\n    }\r\n\r\n    public fade_out(el:HTMLElement,done?:()=>void,time:number=400){\r\n        const info = this.info+\"淡出|\"\r\n        console.log(info+time+\"ms\")\r\n\r\n        const opacity = Number(getComputedStyle(el).opacity) as unknown as number\r\n\r\n        const run_time = 10 //間隔 100ms\r\n        const total_i = Math.floor(time / run_time) //總運行次數\r\n        let i = total_i //運行次數\r\n\r\n        const interval = setInterval(run,run_time)\r\n        run()\r\n\r\n        function run() { \r\n            i--\r\n            \r\n            const fade_opacity = opacity / total_i * i;\r\n            (el.style.opacity as unknown as number) = fade_opacity\r\n            \r\n            if(i === 0){\r\n                clearInterval(interval)\r\n                el.style.display = \"none\"\r\n                if(done){done()}\r\n            }\r\n        }\r\n    }\r\n    private __viewer = {}\r\n    public viewer(key?:string,val?:string,done?:()=>void){\r\n        if(key===undefined){ //&&val===undefined\r\n            return this.__viewer\r\n        }else if(val===undefined){\r\n            return this.__viewer[key]\r\n        }else{\r\n            if(val !== this.__viewer[key]){\r\n                try{\r\n                    const $this = this\r\n                    const el = document.getElementById(\"$\"+key)\r\n                    if(el.style.display === \"none\"||el.style.opacity === \"0\"||$this.__viewer[key] === \"\"||$this.__viewer[key] === undefined){\r\n                        run()\r\n                    }else{\r\n                        $this.fade_out(el,run)\r\n                    }\r\n                    function run(){\r\n                        el.innerHTML = val\r\n                        $this.fade_in(el)\r\n                        if(done){done()}\r\n                    }\r\n                }catch(e){\r\n                    const info = this.info+\"viewer|\"\r\n                    console.warn(info+\"未找到id:\"+key,e)\r\n                }\r\n            }\r\n            return this.__viewer[key] = val\r\n        }\r\n    }\r\n\r\n    private info = \"|主要核心|\"\r\n}","import main_core from './core'\r\nconst main = new main_core()\r\nmain.DOM_ready(() => {\r\n    const image_file = \"resources/images/background\"\r\n    main.background(`${image_file}_blur.webp`, `${image_file}.webp`)\r\n\r\n    function your_name() {\r\n        const name = sessionStorage.getItem(\"your_name\")\r\n        return name === \"\" ? \"陌生人\" : name || \"陌生人\"\r\n    }\r\n\r\n    main.viewer(\"your_name\", `歡迎回來！${your_name()}！`)\r\n    const el_hello_time = document.getElementById(\"hello_time\")\r\n\r\n    hello_time()\r\n    setInterval(hello_time, 300000)\r\n    function hello_time() {\r\n        const $your_name = your_name()\r\n        const hr = new Date().getHours()\r\n        let text = \"\"\r\n        switch (hr) {\r\n            case 23:\r\n            case 0:\r\n            case 1:\r\n            case 2:\r\n            case 3:\r\n                text = `${$your_name}還沒睡麻，${$your_name}可不要一直熬夜喔~`\r\n                break;\r\n            case 4:\r\n            case 5:\r\n            case 6:\r\n            case 7:\r\n            case 8:\r\n            case 9:\r\n                text = `${$your_name}早安喵~`\r\n                break;\r\n            case 10:\r\n            case 11:\r\n                text = `${$your_name}午安~快要到中午惹~`\r\n                break;\r\n            case 12:\r\n                text = `${$your_name}~今天的午餐真好吃呢~`\r\n                break;\r\n            case 13:\r\n            case 14:\r\n            case 15:\r\n                text = `${$your_name}午安~想要躺在${$your_name}的懷裡~`\r\n            case 16:\r\n            case 17:\r\n            case 18:\r\n            case 19:\r\n            case 20:\r\n                text = `${$your_name}晚上好呀~`\r\n                break;\r\n            case 21:\r\n            case 22:\r\n                text = `${$your_name}記得可要早點睡喔~`\r\n                break;\r\n        }\r\n        main.viewer(\"hello_time\", text, ()=>{\r\n            el_hello_time.classList.remove(\"have_input\")\r\n        })\r\n    }\r\n\r\n    let mode = 0\r\n\r\n    document.body.addEventListener(\"click\", (e) => {\r\n        mode = 0\r\n        const $your_name = your_name()\r\n        main.viewer(\"your_name\", `歡迎回來！${$your_name}！`)\r\n        hello_time()\r\n    }, false)\r\n    document.getElementById(\"title\").addEventListener(\"click\", (e) => {\r\n        e.stopPropagation()\r\n        if (mode === 2) { return }\r\n        mode = 1\r\n        main.viewer(\"your_name\", \"想要怎麼叫你呢~\")\r\n        main.viewer(\"hello_time\", \"<input id='input_your_name'>\", () => {\r\n            const input = document.getElementById(\"input_your_name\") as HTMLInputElement\r\n            input.value = sessionStorage.getItem(\"your_name\") || \"\"\r\n            el_hello_time.classList.add(\"have_input\")\r\n        })\r\n    }, false)\r\n    el_hello_time.addEventListener(\"click\", (e) => {\r\n        e.stopPropagation()\r\n        if (mode === 1) { return }\r\n        mode = 2\r\n        main.viewer(\"your_name\", `${your_name()}要找什麼東西嗎~`)\r\n        main.viewer(\"hello_time\", \"<input id='search' class='inline' minlength='1' maxlength='32'><button id='search_btn'>尋找</button>\", () => {\r\n            const input = document.getElementById(\"search\") as HTMLInputElement\r\n            input.value = sessionStorage.getItem(\"last_search\") || \"\"\r\n            el_hello_time.classList.add(\"have_input\")\r\n        })\r\n    }, false)\r\n    el_hello_time.addEventListener(\"input\", (e) => {\r\n        //input向上冒泡\r\n        const target = e.target as HTMLInputElement\r\n        const value = target.value\r\n        const $switch = {\r\n            \"input_your_name\": \"your_name\",\r\n            \"search\": \"last_search\"\r\n        }\r\n        sessionStorage.setItem($switch[target.id], value)\r\n    }, false)\r\n    el_hello_time.addEventListener('keypress', function (e) {\r\n        const target = e.target as HTMLInputElement\r\n        search(target.value, (e.key === 'Enter' && target.id === \"search\"))\r\n    }, false)\r\n    el_hello_time.addEventListener('click', function (e) {\r\n        const target = e.target as HTMLButtonElement\r\n        const is_true = target.id === \"search_btn\"\r\n        if (is_true) {\r\n            const value = (document.getElementById(\"search\") as HTMLInputElement).value\r\n            search(value, is_true)\r\n        }\r\n    }, false)\r\n\r\n    function search(value: string, $if: boolean) {\r\n        if ($if && value.length > 0 && value.length <= 32) {\r\n            sessionStorage.removeItem(\"last_search\")\r\n            location.href = `https://www.google.com/search?q=${encodeURIComponent(value)}`\r\n        }\r\n    }\r\n})"],"sourceRoot":""}